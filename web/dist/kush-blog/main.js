(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,r){e.exports=r("zUnb")},zUnb:function(e,t,r){"use strict";r.r(t);var a=r("fXoL"),i=r("a3Wg"),s=r("mrSG"),n=r("jhN1"),o=r("tyNb");let l=class{};l=Object(s.a)([Object(a.L)({imports:[o.b.forRoot([])],exports:[o.b]})],l);let c=class{constructor(e){this.router=e,this.currentSession=null,this.localStorageService=localStorage,this.currentSession=this.loadSessionData()}setCurrentSession(e){this.currentSession=e,this.localStorageService.setItem("currentUser",JSON.stringify(e))}loadSessionData(){var e=this.localStorageService.getItem("currentUser");return e?JSON.parse(e):null}getCurrentSession(){return this.currentSession}removeCurrentSession(){this.localStorageService.removeItem("currentUser"),this.currentSession=null}getCurrentUser(){var e=this.getCurrentSession();return e&&e.user?e.user:null}isAuthenticated(){return null!=this.getCurrentToken()}getCurrentToken(){var e=this.getCurrentSession();return e&&e.token?e.token:null}logout(){this.removeCurrentSession()}};c.ctorParameters=()=>[{type:o.a}],c=Object(s.a)([Object(a.D)({providedIn:"root"})],c);var d=r("ALmS"),p=r("/IUn");class h{static CopyFrom(e){let t=new h;return t.id=e.id,t.username=e.username,t}}class u{static CopyFrom(e){let t=new u;return t.name=e.name,t.id=e.id,e.author&&(t.author=h.CopyFrom(e.author)),t.landingTemplate=e.landingTemplate,t.articlesTemplate=e.articlesTemplate,t.articleTemplate=e.articleTemplate,t.landingQuery=e.landingQuery,t.articlesQuery=e.articlesQuery,t.articleQuery=e.articleQuery,t}getPropertyByName(e){switch(e){case"landingTemplate":return this.landingTemplate;case"articlesTemplate":return this.articlesTemplate;case"articleTemplate":return this.articleTemplate;case"articlesQuery":return this.articlesQuery;case"articleQuery":return this.articleQuery;case"landingQuery":return this.landingQuery}return""}setPropertyByName(e,t){switch(e){case"landingTemplate":this.landingTemplate=t;break;case"articlesTemplate":this.articlesTemplate=t;break;case"articleTemplate":this.articleTemplate=t;break;case"articlesQuery":this.articlesQuery=t;break;case"articleQuery":this.articleQuery=t;break;case"landingQuery":this.landingQuery=t}}}let m=class{constructor(e,t){this.apollo=e,this.storageService=t,this.title="kush-blog",this.loading=!0,this.gqlTest='\n  {\n    GetThemeByName(name: "Original") {\n      message\n      status\n      data {\n        id\n        name\n        landingTemplate\n        landingQuery\n        articlesQuery\n        articlesTemplate\n        articleQuery\n        articleTemplate\n        author {\n          id\n          username\n        }\n      }\n    }\n  }\n'}ngOnInit(){this.apollo.subscribe({query:d.gql`
              subscription themeChanged{
                themeChanged{
                    id
                    name
                    landingTemplate
                    landingQuery
                    articlesQuery
                    articlesTemplate
                    articleQuery
                    articleTemplate
                }
            }`}).subscribe(e=>{var t,r,a,i,s,n,o,l,c,d,p,h;this.theme.articleQuery=null===(r=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.themeChanged)||void 0===r?void 0:r.articleQuery,this.theme.articleTemplate=null===(i=null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.themeChanged)||void 0===i?void 0:i.articleTemplate,this.theme.articlesQuery=null===(n=null===(s=null==e?void 0:e.data)||void 0===s?void 0:s.themeChanged)||void 0===n?void 0:n.articlesQuery,this.theme.articlesTemplate=null===(l=null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.themeChanged)||void 0===l?void 0:l.articlesTemplate,this.theme.landingQuery=null===(d=null===(c=null==e?void 0:e.data)||void 0===c?void 0:c.themeChanged)||void 0===d?void 0:d.landingQuery,this.theme.landingTemplate=null===(h=null===(p=null==e?void 0:e.data)||void 0===p?void 0:p.themeChanged)||void 0===h?void 0:h.landingTemplate}),this.apollo.watchQuery({query:Object(d.gql)(this.gqlTest)}).valueChanges.subscribe(e=>{this.theme=u.CopyFrom(null==e?void 0:e.data[Object.keys(null==e?void 0:e.data)[0]].data),this.loading=e.loading,this.error=e.error})}};m.ctorParameters=()=>[{type:p.b},{type:c}],m=Object(s.a)([Object(a.o)({selector:"app-root",template:'<div *ngIf="loading">\r\n  <div class="fixed inset-0 text-white flex flex-col justify-center items-center bg-gray-900">\r\n    <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-full mb-2" stroke="#fff" viewBox="0 0 38 38">\r\n      <g transform="translate(1 1)" stroke-width="2" fill="none" fill-rule="evenodd">\r\n        <circle stroke-opacity=".5" cx="18" cy="18" r="18" />\r\n        <path d="M36 18c0-9.94-8.06-18-18-18">\r\n          <animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="1s"\r\n            repeatCount="indefinite" />\r\n        </path>\r\n      </g>\r\n      <style id="stylus-1" type="text/css"></style>\r\n    </svg>\r\n    <span class="font-mono font-bold">_loading</span>\r\n  </div>\r\n</div>\r\n<div *ngIf="error">\r\n  <div class="fixed inset-0 text-white flex flex-col justify-center items-center bg-gray-900">\r\n    <span>Error :(</span>\r\n  </div>\r\n</div>\r\n\r\n<div *ngIf="theme" class="overflow-hidden relative max-h-screen">\r\n  <div\r\n    class="relative flex items-center justify-between px-3 top-0 left-0 right-0 bg-gray-900 py-1 z-50 border-b border-gray-800">\r\n    <h3 class="font-mono flex justify-start items-center font-bold text-2xl text-white">\r\n      Kush<span class="opacity-50">Team</span>\r\n      <span class="mx-2 bg-indigo-700 text-sm px-2 py-1 rounded-md">.dev</span>\r\n    </h3>\r\n    <a class="transform  top-0 right-0 translate-x-8 scale-75" target="_blank" rel="noopener noreferrer"\r\n    href="https://www.buymeacoffee.com/kushteam"><img\r\n    src="https://img.buymeacoffee.com/button-api/?text=Buy me a coffee&emoji=&slug=kushteam&button_colour=FFDD00&font_colour=000000&font_family=Cookie&outline_colour=000000&coffee_colour=ffffff"></a>\r\n    <app-login *ngIf="!storageService.isAuthenticated()"></app-login>\r\n    <a *ngIf="storageService.isAuthenticated()" (click)="storageService.logout()">Logout </a>\r\n  </div>\r\n  <div class="flex overflow-hidden relative">\r\n    <div class="w-1/2 border-r-2 border-green-500">\r\n      <app-playground [theme]="theme"></app-playground>\r\n    </div>\r\n    <div class="w-1/2 overflow-y-auto relative max-h-screen relative">\r\n      <app-landing [query]="theme.landingQuery" [stringTemplate]="theme.landingTemplate"></app-landing>\r\n      <app-articles [query]="theme.articlesQuery" [stringTemplate]="theme.articlesTemplate"></app-articles>\r\n      <app-article [query]="theme.articleQuery" [stringTemplate]="theme.articleTemplate"></app-article>\r\n    </div>\r\n  </div>\r\n</div>\r\n',styles:[""]})],m);let g=class{constructor(){this.fileChanged=new a.x}setFile(e,t){this.currentKey=e,this.currentLanguage=t,this.fileChanged.emit({key:this.currentKey,language:this.currentLanguage})}};g.ctorParameters=()=>[],g=Object(s.a)([Object(a.D)({providedIn:"root"})],g);let y=class{constructor(e,t,r,a){this.differs=e,this.apollo=t,this.playgroundService=r,this.storageService=a,this.editorOptions={theme:"vs-dark",language:"graphql"},this.key="",this.UPDATE_THEME=d.gql`
    mutation UpdateTheme($id: ID!, $theme: ThemeInput!) {
      UpdateTheme(id: $id, Theme: $theme) {
        message
        status
        data {
          id
          name
        }
      }
    }
  `,this.differ=this.differs.find({}).create()}ngOnInit(){this.playgroundService.fileChanged.subscribe(e=>{this.key=e.key,this.code=this.theme.getPropertyByName(this.key),this.editorOptions={theme:"vs-dark",language:e.language}})}ngDoCheck(){const e=this.differ.diff(this);e&&e.forEachChangedItem(e=>{"theme"==e.key&&(this.code=this.theme.getPropertyByName(this.key)),"code"==e.key&&this.theme.setPropertyByName(this.key,e.currentValue)})}setFile(e,t){this.playgroundService.setFile(e,t)}saveTheme(){let e={name:this.theme.name,landingTemplate:this.theme.landingTemplate,landingQuery:this.theme.landingQuery,articlesTemplate:this.theme.articlesTemplate,articlesQuery:this.theme.articlesQuery,articleTemplate:this.theme.articleTemplate,articleQuery:this.theme.articleQuery,authorID:this.theme.author.id};this.apollo.mutate({mutation:this.UPDATE_THEME,variables:{id:this.theme.id,theme:e}}).subscribe(({data:e})=>{},e=>{})}};y.ctorParameters=()=>[{type:a.I},{type:p.b},{type:g},{type:c}],y.propDecorators={theme:[{type:a.G}]},y=Object(s.a)([Object(a.o)({selector:"app-playground",template:'<div class="flex flex-col font-mono relative">\r\n  <button *ngIf="storageService.isAuthenticated()"\r\n    class="z-50 bg-green-500 absolute hover:bg-green-600 transition-all duration-500 right-0 top-0 transform rounded-none px-4 py-1 font-bold text-white"\r\n    (click)="saveTheme()">Save theme\r\n  </button>\r\n  <div class="shadow-lg delay-150 border-r-2 border-orange-500 left-0 pt-2 top-0 bottom-0 absolute w-64  bg-gray-900 text-white font-mono z-40 transform duration-1000 transition-all -translate-x-56 hover:translate-x-0">\r\n    <div class="absolute right-0 top-0 transform translate-x-16 bg-orange-500 px-6 py-1 font-bold flex">\r\n      <span class="transform transition-all inline-block rotate-90 font-sans mr-2">\r\n        III\r\n      </span>\r\n      Data\r\n    </div>\r\n    <h1 class="font-bold mb-12 pl-4">{{theme.name}} by <small>{{theme.author.username}}</small></h1>\r\n    <div class="space-y-3 text-sm">\r\n      <div>\r\n        <h4 class="my-6 font-bold pl-4">Querys</h4>\r\n        <div class=" space-y-3">\r\n          <div class="pl-4 border-b border-orange-500 hover:text-orange-300 font-bold cursor-pointer"\r\n            (click)="setFile(\'landingQuery\', \'graphql\')">\r\n            landing<span class="text-orange-500">.graphql</span>\r\n          </div>\r\n          <div class="pl-4 border-b border-orange-500 hover:text-orange-300 font-bold cursor-pointer"\r\n            (click)="setFile(\'articlesQuery\', \'graphql\')">\r\n            articles<span class="text-orange-500">.graphql</span>\r\n          </div>\r\n          <div class="pl-4 border-b border-orange-500 hover:text-orange-300 font-bold cursor-pointer"\r\n            (click)="setFile(\'articleQuery\', \'graphql\')">\r\n            article<span class="text-orange-500">.graphql</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="mt-3">\r\n        <h4 class="my-12 mb-3 pl-4 font-bold">Templates</h4>\r\n        <div class="space-y-3">\r\n          <div class="pl-4 border-b border-blue-500 hover:text-blue-300 font-bold cursor-pointer"\r\n            (click)="setFile(\'landingTemplate\', \'html\')">\r\n            landing<span class="text-blue-500">.html</span>\r\n          </div>\r\n          <div class="pl-4 border-b border-blue-500 hover:text-blue-300 font-bold cursor-pointer"\r\n            (click)="setFile(\'articlesTemplate\', \'html\')">\r\n            articles<span class="text-blue-500">.html</span>\r\n          </div>\r\n          <div class="pl-4 border-b border-blue-500 hover:text-blue-300 font-bold cursor-pointer"\r\n            (click)="setFile(\'articleTemplate\', \'html\')">\r\n            article<span class="text-blue-500">.html</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="w-full pt-8 bg-gray-900  pl-6 h-screen" style="padding-top: 2.2rem;  background: #1e1e1e;">\r\n    <ngx-monaco-editor style="height: 100%; width: 100%;" [options]="editorOptions" [(ngModel)]="code"></ngx-monaco-editor>\r\n  </div>\r\n</div>\r\n',styles:[""]})],y);let v=class{constructor(){this.articleChanged=new a.x}setArticle(e){this.currentArticleID=e,this.articleChanged.emit(e)}};v.ctorParameters=()=>[],v=Object(s.a)([Object(a.D)({providedIn:"root"})],v);class b{static CopyFrom(e){let t=new b;return t.id=e.id,t.name=e.name,t}}class f{static CopyFrom(e){let t=new f;return t.id=e.id,t.title=e.title,t.content=e.content,t.brief=e.brief,t.createdAt=e.createdAt,e.author&&(t.author=h.CopyFrom(e.author)),e.category&&(t.category=b.CopyFrom(e.category)),t}}let T=class{constructor(e,t,r){this.apollo=e,this.playgroundService=t,this.articleService=r,this.loading=!0}setFile(e,t){this.playgroundService.setFile(e,t)}setArticle(e){this.articleService.setArticle(e)}ngOnChanges(){this.apollo.watchQuery({query:Object(d.gql)(this.query)}).valueChanges.subscribe(e=>{this.articles=(null==e?void 0:e.data[Object.keys(null==e?void 0:e.data)[0]].dataList).map(e=>f.CopyFrom(e)),this.loading=e.loading,this.error=e.error})}ngOnInit(){}};T.ctorParameters=()=>[{type:p.b},{type:g},{type:v}],T.propDecorators={stringTemplate:[{type:a.G}],query:[{type:a.G}]},T=Object(s.a)([Object(a.o)({selector:"app-articles",template:'<ng-container *compile="stringTemplate; context: { setFile: this.setFile, setArticle: this.setArticle, articles: articles }"></ng-container>\n',styles:[""]})],T);let x=class{constructor(e){this.playground=e}ngOnInit(){}setFile(e,t){this.playground.setFile(e,t)}};x.ctorParameters=()=>[{type:g}],x.propDecorators={stringTemplate:[{type:a.G}],query:[{type:a.G}]},x=Object(s.a)([Object(a.o)({selector:"app-landing",template:'<ng-container *compile="stringTemplate; context: { }"></ng-container>\n',styles:[""]})],x);var O=r("yvwu"),w=r("3Pt+"),S=r("E21e"),C=r("0vX6"),k=r("H8+m");let j=class{};j=Object(s.a)([Object(a.L)({providers:[{provide:p.a,useFactory(e){const t=e.create({uri:"https://kush-team.dev/graphql"}),r=new C.a({uri:"wss://kush-team.dev/graphql",options:{reconnect:!0}}),a=Object(d.split)(({query:e})=>{let t=Object(k.p)(e);return"OperationDefinition"===t.kind&&"subscription"===t.operation},r,t);return{cache:new d.InMemoryCache,link:a}},deps:[S.a]}]})],j);var Q=r("tk/3");let F=class{constructor(e,t,r){this.apollo=e,this.playgroundService=t,this.articlesService=r,this.loading=!0}setFile(e,t){this.playgroundService.setFile(e,t)}ngOnInit(){this.articlesService.articleChanged.subscribe(e=>{this.articleID=e,this.getArticle()})}ngOnChanges(){this.articleID&&this.getArticle()}getArticle(){this.apollo.watchQuery({query:Object(d.gql)(this.query),variables:{id:this.articleID}}).valueChanges.subscribe(e=>{this.article=f.CopyFrom(null==e?void 0:e.data[Object.keys(null==e?void 0:e.data)[0]].data),this.loading=e.loading,this.error=e.error})}};F.ctorParameters=()=>[{type:p.b},{type:g},{type:v}],F.propDecorators={stringTemplate:[{type:a.G}],query:[{type:a.G}]},F=Object(s.a)([Object(a.o)({selector:"app-article",template:'<ng-container *compile="stringTemplate; context: { setFile: this.setFile, article: article }"></ng-container>\n',styles:[""]})],F);var I=r("ofXK");let A=class{constructor(e,t){this.vcRef=e,this.compiler=t,this.compile=""}ngOnChanges(){if(!this.compile){if(this.compRef)return void this.updateProperties();throw Error("You forgot to provide template")}this.vcRef.clear();const e=this.createDynamicComponent(this.compile),t=this.createDynamicModule(e);this.compiler.compileModuleAndAllComponentsAsync(t).then(t=>{let r=t.componentFactories.find(t=>t.componentType===e);r&&(this.compRef=this.vcRef.createComponent(r)),this.updateProperties()}).catch(e=>{console.log(e)})}updateProperties(){for(var e in this.compileContext)this.compRef.instance[e]=this.compileContext[e]}createDynamicComponent(e){let t=class{constructor(e,t){this.playgroundService=e,this.articleService=t}};return t.ctorParameters=()=>[{type:g},{type:v}],t=Object(s.a)([Object(a.o)({selector:"custom-dynamic-component",template:e})],t),t}createDynamicModule(e){let t=class{};return t=Object(s.a)([Object(a.L)({imports:[I.b],declarations:[e],schemas:[a.j],providers:[g,v]})],t),t}};A.ctorParameters=()=>[{type:a.nb},{type:a.m}],A.propDecorators={compile:[{type:a.G}],compileContext:[{type:a.G}]},A=Object(s.a)([Object(a.u)({selector:"[compile]"})],A);var q=r("z6cu"),D=r("JIr8");let P=class{constructor(e,t){this.router=e,this.storageService=t}intercept(e,t){let r=e;return this.storageService.isAuthenticated()&&(r=e.clone({setHeaders:{authorization:""+this.storageService.getCurrentToken()}})),t.handle(r).pipe(Object(D.a)(e=>(401===e.status&&this.router.navigateByUrl("/login"),Object(q.a)(e))))}};P.ctorParameters=()=>[{type:o.a},{type:c}],P=Object(s.a)([Object(a.D)({providedIn:"root"})],P);let N=class{constructor(e){this.apollo=e,this.LOGIN_MUTATION=d.gql`
    mutation Login($emailAddress: String!, $password: String!) {
      Login(emailAddress: $emailAddress, password: $password) {
        message
        status
        token
        user {
          id
          username
          emailAddress
          role
        }
      }
    }
  `}login(e,t){return this.apollo.mutate({mutation:this.LOGIN_MUTATION,variables:{emailAddress:e,password:t}})}};N.ctorParameters=()=>[{type:p.b}],N=Object(s.a)([Object(a.D)({providedIn:"root"})],N);class L{constructor(e,t){this.token=e,this.user=t}}class U{constructor(e,t,r,a){this.id=e,this.fullName=t,this.emailAddress=r,this.role=a}}let G=class{constructor(e,t,r){this.formBuilder=e,this.authenticationService=t,this.storageService=r,this.error={code:0,message:""}}ngOnInit(){this.loginForm=this.formBuilder.group({emailAddress:["",w.e.required],password:["",w.e.required]})}login(){this.submitted=!0,this.error=null,this.loginForm.valid&&this.authenticationService.login(this.loginForm.value.emailAddress,this.loginForm.value.password).subscribe(e=>this.correctLogin(e.data.Login),e=>this.error=JSON.parse(e._body))}correctLogin(e){this.storageService.setCurrentSession(new L(e.token,new U(e.user.id,e.user.fullName,e.user.emailAddress,e.user.role)))}};G.ctorParameters=()=>[{type:w.a},{type:N},{type:c}],G=Object(s.a)([Object(a.o)({selector:"app-login",template:'<form  id="login-form" #lForm="ngForm" [formGroup]="loginForm" (ngSubmit)="login()" novalidate class="w-full max-w-sm">\n  <div class="flex items-center border-b border-b-2 border-green-800 py-2">\n    <input matInput type="text" formControlName="emailAddress" placeholder="Email"\n      class="appearance-none bg-transparent border-none w-full text-gray-700 mr-3 py-1 px-2 leading-tight focus:outline-none"\n    >\n    <input matInput type="password" formControlName="password" autocomplete="current-password" required\n      class="appearance-none bg-transparent border-none w-full text-gray-700 mr-3 py-1 px-2 leading-tight focus:outline-none"\n      placeholder="Password">\n\n    <button mat-raised-button type="submit" form="login-form" [disabled]="!loginForm.valid"\n      class="flex-shrink-0 bg-green-800 hover:bg-green-700 border-green-800 hover:border-green-700 text-sm border-4 text-white py-1 px-2 rounded">\n      Sign In\n    </button>\n  </div>\n</form>\n',styles:[""]})],G);let _=class{};_=Object(s.a)([Object(a.L)({declarations:[m,y,T,x,F,A,G],imports:[n.a,l,w.b,O.a.forRoot(),j,Q.c,w.b,w.d],providers:[{provide:Q.a,useClass:P,multi:!0}],bootstrap:[m]})],_);r("1uSB");Object(i.a)().bootstrapModule(_).catch(e=>console.error(e))},zn8P:function(e,t){function r(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id="zn8P"}},[[0,0,4]]]);
//# sourceMappingURL=main.js.map